import re
from cs50 import get_string

credit_card_string = get_string("Credit card number:")

n = int(credit_card_string)

# Calculate CC checksum
sum = ((((n % 100 - n % 10) / 5) % 10) + ((((n % 100 - n % 10) / 5) % 100 - ((n % 100 - n % 10) / 5) % 10) / 10) + (((n % 10000 - n % 1000) / 500) % 10)+((((n % 10000 - n % 1000) / 500) % 100 - ((n % 10000 - n % 1000) / 500) % 10) / 10) + (((n % 1000000 - n % 100000) / 50000) % 10) + ((((n % 1000000 - n % 100000) / 50000) % 100 - ((n % 1000000 - n % 100000) / 50000) % 10) / 10) + (((n % 100000000 - n % 10000000) / 5000000) % 10000000) + ((((n % 100000000 - n % 10000000) / 5000000) % 100 - ((n % 100000000 - n % 10000000) / 5000000) % 10) / 10) + (((n % 10000000000 - n % 1000000000) / 500000000) % 10) + ((((n % 10000000000 - n % 1000000000) / 500000000) % 100 - ((n % 10000000000 - n % 1000000000) / 500000000) % 10) / 10) + (((n % 1000000000000 - n % 100000000000) / 50000000000) % 10) + ((((n % 1000000000000 - n % 100000000000) / 50000000000) % 100 - ((n % 1000000000000 - n % 100000000000) / 50000000000) % 10) / 10) + (((n % 100000000000000 - n % 10000000000000) / 5000000000000) % 10) + ((((n % 100000000000000 - n % 10000000000000) / 5000000000000) % 100-((n % 100000000000000 - n % 10000000000000) / 5000000000000) % 10) / 10) + (((n % 10000000000000000 - n % 1000000000000000) / 500000000000000) % 10) + ((((n % 10000000000000000 - n % 1000000000000000) / 500000000000000) % 100 - ((n % 10000000000000000 - n % 1000000000000000) / 500000000000000) % 10) / 10) + ((n % 10) + ((n % 1000 - n % 100) / 100) + ((n % 100000 - n % 10000) / 10000) + ((n % 10000000 - n % 1000000) / 1000000) + ((n % 1000000000 - n % 100000000) / 100000000) + ((n % 100000000000 - n % 10000000000) / 10000000000) + ((n % 10000000000000 - n % 1000000000000) / 1000000000000) + ((n % 1000000000000000 - n % 100000000000000) / 100000000000000)));

# Check if valid CC number
if(sum % 10 == 0):

# Check if CC is American Express
    if(re.search("^34|^37", credit_card_string) and len(credit_card_string) == 15):
        print("AMEX")
        
# Check if CC is Mastercard
    elif(re.search("^51|^52|^53|^54|^55", credit_card_string) and len(credit_card_string) == 16):
        print("MASTERCARD")
        
# Check if CC is Visa
    elif(re.search("^4", credit_card_string) and len(credit_card_string) > 12 and len(credit_card_string) < 17):
        print("VISA");
else:
    print("INVALID")

